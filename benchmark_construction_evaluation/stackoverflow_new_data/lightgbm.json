[{"votes": "35", "answers": [{"answer_content": "All the above answers didn't work for me.\nOn Mac, if I installed the libomp using brew fixed the problem: Refer: link  \nbrew install libomp", "answer_comment": ["This worked for me. Thanks. The above stuff didn't work!", "This should be the updated answer. I didn't need any of the steps stated in the accepted answer.", "Works for me as well. simple solution.", "I'm running python in a virtual environment (venv) and this answer solved the OSError.", "Worked for me too on macOS 11.6.5; thanks!"], "answer_score": "88", "answer_code_list": ["brew install libomp\n"], "is_accepted": false}, {"answer_content": "I had the same exact problem on M1 MAC. I have tried to import it through Jupiter notebook. This command solved the problem:\nconda install lightgbm", "answer_comment": [], "answer_score": "17", "answer_code_list": ["conda install lightgbm\n"], "is_accepted": false}, {"answer_content": "I find a similar problem here LightGBM\nThe answer and comment may help you.  \nBuild LightGBM in Mac:\nbrew install cmake  \nbrew install gcc --without-multilib  \ngit clone --recursive https://github.com/Microsoft/LightGBM ; cd LightGBM  \nmkdir build ; cd build  \ncmake ..   \nmake -j  \n\nThen install:\ncd ../python-packages  \nsudo python setup.py install --precompile\n\nAs stated by @ecodan, you might need to force Mac to use GCC and G++ instead of the default compiler. So instead of building with cmake .., try:\ncmake -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/gcc-6 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/g++-6 ..\n\najusting the versions to match yours.", "answer_comment": ["FWIW, my HighSierra Mac prefers AppleCLang over GCC, so I had to force the path as such:  cmake -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/gcc-6 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/g++-6 ..", "can I do pip install lightgbm? I did that I got the same error message that the library doesn't load.", "The folder name is python-package (without the s) (in LightGBM version 2.1.2)", "--without-multilib does not exist anymore", "just remove --without-multilib and it will work"], "answer_score": "14", "answer_code_list": ["brew install cmake  \nbrew install gcc --without-multilib  \ngit clone --recursive https://github.com/Microsoft/LightGBM ; cd LightGBM  \nmkdir build ; cd build  \ncmake ..   \nmake -j  \n", "cd ../python-packages  \nsudo python setup.py install --precompile\n", "cmake -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/gcc-6 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/6.1.0/bin/g++-6 ..\n"], "is_accepted": true}, {"answer_content": "On MAC you need to install open-mpi:\nbrew install open-mpi", "answer_comment": [], "answer_score": "4", "answer_code_list": ["brew install open-mpi\n"], "is_accepted": false}, {"answer_content": "Same error, different source: seems like I had the gcc 8 version installed, and it needs gcc 7.\nIt worked by switching it back to last gcc 7 version:\nbrew switch gcc 7.3.0_1", "answer_comment": ["hi I met exactly the same problem and use gcc8. I'd like to try out your suggestion. However, brew switch gcc 7.3.0_1 does not work as it doesn't have this version installed. Do you know how to install this version?", "How to install gcc 7 while keep gcc 8"], "answer_score": "2", "answer_code_list": ["brew switch gcc 7.3.0_1\n"], "is_accepted": false}, {"answer_content": "For users with macports, replace the beginning of the brew solution with:\n\nport install gcc7 cmake\nexport CXX=g++-mp-7 CC=gcc-mp-7", "answer_comment": ["Yep, had the same problem. Check out github.com/Microsoft/LightGBM/blob/master/docs/\u2026"], "answer_score": "1", "answer_code_list": [], "is_accepted": false}, {"answer_content": "On MacOS High Sierra with MacPorts installed, I did the following:\n\nInstall clang-5.0 using MacPorts\nInside the /build directory, run\ncmake -DCMAKE_CXX_COMPILER=clang++-mp-5.0 -DCMAKE_C_COMPILER=clang-mp-5.0 ..\nTo build the python package, go to /python_package directory and modify the setup.py script.\nYou need to modify the function compile_cpp() at the very end that checks the case for other OS (including Mac). Before the silent_call(...), add the following two lines:\n\ncmake_cmd.append(\"-DCMAKE_CXX_COMPILER=clang++-mp-5.0\")\ncmake_cmd.append(\"-DCMAKE_C_COMPILER=clang-mp-5.0\")\n\nRun sudo python setup.py install. Enjoy", "answer_comment": [], "answer_score": "1", "answer_code_list": [], "is_accepted": false}, {"answer_content": "I used this command generated from PyCharm and it worked for me.  \nconda install -p { < =replace with USER_HOME_DIR>}/anaconda3 lightgbm -y\nNote : i tried Brew and pip install but they didn't work for me as Azure ML studio already downloaded other versions of LightGBM that were causing conflict in upgrading to correct packages.", "answer_comment": [], "answer_score": "0", "answer_code_list": [], "is_accepted": false}, {"answer_content": "conda install -c conda-forge lightgbm", "answer_comment": [], "answer_score": "0", "answer_code_list": ["conda install -c conda-forge lightgbm\n"], "is_accepted": false}], "views": "42k", "title": "Lightgbm OSError, Library not loaded", "question_link": "https://stackoverflow.com/questions/44937698/lightgbm-oserror-library-not-loaded", "question_content": "If I simply do:\nimport lightgbm as lgb\n\nI'm getting\npython script.py \nTraceback (most recent call last):\nFile \"script.py\", line 4, in <module>\nimport lightgbm as lgb\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/__init__.py\", line 8, in <module>\nfrom .basic import Booster, Dataset\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/basic.py\", line 31, in <module>\n_LIB = _load_lib()\nFile \"/usr/local/lib/python2.7/site-packages/lightgbm/basic.py\", line 26, in _load_lib\nlib = ctypes.cdll.LoadLibrary(lib_path[0])\nFile \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py\", line 440, in LoadLibrary\nreturn self._dlltype(name)\nFile \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py\", line 362, in __init__\nself._handle = _dlopen(self._name, mode)\nOSError: dlopen(/usr/local/lib/python2.7/site-packages/lightgbm/lib_lightgbm.so, 6): Library not loaded: /usr/local/opt/gcc/lib/gcc/7/libgomp.1.dylib\nReferenced from: /usr/local/lib/python2.7/site-packages/lightgbm/lib_lightgbm.so\nReason: image not found\n\nI seem to have everything installed correct:\npython -m pip install lightgbm\nRequirement already satisfied: lightgbm in /usr/local/lib/python2.7/site-packages\nRequirement already satisfied: wheel in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: scikit-learn in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: scipy in /usr/local/lib/python2.7/site-packages (from lightgbm)\nRequirement already satisfied: numpy in /usr/local/lib/python2.7/site-packages (from lightgbm)\n\nI do have a 6 folder in my GCC folder.  Should I need to install another version of GCC for this to work?", "question_comment": []}]